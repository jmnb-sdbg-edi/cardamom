<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cTools.kdevelop: HighResTime.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>HighResTime.cc</h1><a href="HighResTime_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* -*- C++ -*-</span>
00002 <span class="comment"> * $Id: HighResTime_8cc-source.html,v 1.1.1.1 2005-07-08 14:31:04 moghrabi Exp $</span>
00003 <span class="comment"> */</span>
00004 <span class="preprocessor">#include "<a class="code" href="HighResTime_8h.html">ctools/time/HighResTime.h</a>"</span>
00005 
<a name="l00006"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a0">00006</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a0">ctools::time::HighResTime::HighResTime</a>(<a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> clockTicks) 
00007 {
00008     this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">set</a>(clockTicks);
00009 }
00010 
<a name="l00011"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a1">00011</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a0">ctools::time::HighResTime::HighResTime</a>(<a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> msec, <a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> nsec)
00012 { 
00013     this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">set</a>(msec, nsec);
00014 }
00015 
<a name="l00016"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a2">00016</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a0">ctools::time::HighResTime::HighResTime</a>(<span class="keyword">const</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html">HighResTime</a>&amp; time) 
00017 {
00018     *<span class="keyword">this</span> = time;
00019 }
00020 
<a name="l00021"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a3">00021</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a3">ctools::time::HighResTime::~HighResTime</a>() { }
00022 
00023 <a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">ctools::time::HighResTime::time_t</a> 
<a name="l00024"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">00024</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">ctools::time::HighResTime::millisec</a>()<span class="keyword"> const</span>
00025 <span class="keyword"></span>{ 
00026     <span class="keywordflow">return</span> msec_; 
00027 }
00028 
00029 <span class="keywordtype">void</span>   
<a name="l00030"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a5">00030</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">ctools::time::HighResTime::millisec</a>(<a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> msec) 
00031 { 
00032     msec_ = msec; 
00033 }
00034 
00035 <a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">ctools::time::HighResTime::time_t</a>
<a name="l00036"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">00036</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">ctools::time::HighResTime::nanosec</a>()<span class="keyword"> const </span>
00037 <span class="keyword"></span>{ 
00038     <span class="keywordflow">return</span> nsec_; 
00039 }
00040 
00041 <span class="keywordtype">void</span>   
<a name="l00042"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a7">00042</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">ctools::time::HighResTime::nanosec</a>(<a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> nsec) 
00043 { 
00044     nsec_ = nsec; 
00045 }
00046 
00047 <span class="keywordtype">void</span> 
<a name="l00048"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a9">00048</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">ctools::time::HighResTime::set</a>(<a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> clockTicks) 
00049 {
00050     <span class="keywordtype">long</span> <span class="keywordtype">double</span> timeNS = static_cast&lt;long double&gt;(clockTicks) * <a class="code" href="SysInfo_8h.html#a1">CLOCK_PERIOD_NS</a>;
00051 
00052     <span class="keywordtype">long</span> cMilliSec = static_cast&lt;long&gt;(timeNS/<a class="code" href="SysInfo_8h.html#a7">POW_6_TEN</a>);
00053     <span class="keywordtype">long</span> cNanoSec = static_cast&lt;long&gt;(timeNS - (cMilliSec *<a class="code" href="SysInfo_8h.html#a7">POW_6_TEN</a>));
00054 
00055    this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">set</a>(cMilliSec, cNanoSec);
00056 }
00057 
00058 <span class="keywordtype">void</span> 
<a name="l00059"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">00059</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">ctools::time::HighResTime::set</a>(<a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> msec, <a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> nsec) 
00060 {
00061    msec_ = msec;
00062    nsec_ = nsec;
00063    
00064    <a class="code" href="classctools_1_1time_1_1HighResTime.html#w0">time_t</a> msecInNsec = nsec_ / <a class="code" href="SysInfo_8h.html#a7">POW_6_TEN</a>;
00065    <span class="keywordflow">if</span> (msecInNsec) {
00066       msec_ += msecInNsec;
00067       nsec_ -= msecInNsec * <a class="code" href="SysInfo_8h.html#a7">POW_6_TEN</a>;
00068    }
00069 }
00070 
00071 <span class="keywordtype">void</span> 
<a name="l00072"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a10">00072</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a10">ctools::time::HighResTime::reset</a>() 
00073 { 
00074    this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">set</a>(0, 0); 
00075 }
00076 
00077 <span class="keywordtype">long</span> <span class="keywordtype">double</span> 
<a name="l00078"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a11">00078</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a11">ctools::time::HighResTime::toMillisec</a>()<span class="keyword"> const </span>
00079 <span class="keyword"></span>{
00080    <span class="keywordflow">return</span> msec_ + static_cast&lt;long double&gt;(nsec_) / <a class="code" href="SysInfo_8h.html#a7">POW_6_TEN</a>; 
00081 }
00082 
00083 <span class="keywordtype">long</span> <span class="keywordtype">double</span> 
<a name="l00084"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a12">00084</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a12">ctools::time::HighResTime::toMicrosec</a>()<span class="keyword"> const </span>
00085 <span class="keyword"></span>{
00086    <span class="keywordflow">return</span> msec_* <a class="code" href="SysInfo_8h.html#a6">POW_3_TEN</a> + static_cast&lt;long double&gt;(nsec_) / <a class="code" href="SysInfo_8h.html#a6">POW_3_TEN</a>; 
00087 }
00088 
00089 <span class="keywordtype">long</span> <span class="keywordtype">double</span> 
<a name="l00090"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a13">00090</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a13">ctools::time::HighResTime::toNanosec</a>()<span class="keyword"> const </span>
00091 <span class="keyword"></span>{
00092    <span class="keywordflow">return</span> msec_* <a class="code" href="SysInfo_8h.html#a7">POW_6_TEN</a> + nsec_;
00093 }
00094 
00095 
00096 <a class="code" href="classctools_1_1time_1_1HighResTime.html">ctools::time::HighResTime</a>
<a name="l00097"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a14">00097</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a14">ctools::time::HighResTime::operator+</a>(<span class="keyword">const</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html">HighResTime</a>&amp; rhs) 
00098 {
00099     <span class="keywordflow">return</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a0">HighResTime</a>(this-&gt;millisec() + rhs.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">millisec</a>(),
00100                        this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">nanosec</a>() + rhs.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">nanosec</a>());  
00101 }
00102  
00103 <a class="code" href="classctools_1_1time_1_1HighResTime.html">ctools::time::HighResTime</a>
<a name="l00104"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a15">00104</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a15">ctools::time::HighResTime::operator-</a>(<span class="keyword">const</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html">HighResTime</a>&amp; rhs) 
00105 {
00106     <span class="keywordflow">return</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a0">HighResTime</a>(this-&gt;millisec() - rhs.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">millisec</a>(),
00107                        this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">nanosec</a>() - rhs.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">nanosec</a>());  
00108 }
00109 
00110 <span class="keyword">const</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html">ctools::time::HighResTime</a>&amp;
<a name="l00111"></a><a class="code" href="classctools_1_1time_1_1HighResTime.html#a16">00111</a> <a class="code" href="classctools_1_1time_1_1HighResTime.html#a16">ctools::time::HighResTime::operator=</a>(<span class="keyword">const</span> <a class="code" href="classctools_1_1time_1_1HighResTime.html">HighResTime</a>&amp; rhs) 
00112 {
00113    this-&gt;<a class="code" href="classctools_1_1time_1_1HighResTime.html#a8">set</a>(rhs.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">millisec</a>(), rhs.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">nanosec</a>());
00114    <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00115 }
00116 
00117 std::ostream&amp; 
<a name="l00118"></a><a class="code" href="HighResTime_8h.html#a0">00118</a> <a class="code" href="HighResTime_8h.html#a0">operator&lt;&lt;</a>(std::ostream&amp; os, <span class="keyword">const</span>  <a class="code" href="classctools_1_1time_1_1HighResTime.html">ctools::time::HighResTime</a>&amp; time)
00119 {
00120      os &lt;&lt; time.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a4">millisec</a>() &lt;&lt; <span class="stringliteral">" msec "</span> &lt;&lt; time.<a class="code" href="classctools_1_1time_1_1HighResTime.html#a6">nanosec</a>() &lt;&lt; <span class="stringliteral">" nsec"</span>;
00121      <span class="keywordflow">return</span> os;
00122 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 18 17:09:52 2004 for cTools.kdevelop by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
